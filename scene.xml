<scene version="3.0.0">
    <integrator type="path">
        <integer name="max_depth" value="5"/>
    </integrator>

    <sensor type="perspective">
        <string name="fov_axis" value="y"/>
        <float name="fov" value="30"/>
        
        <float name="near_clip" value="0.1"/>
        <float name="far_clip" value="100.0"/>

        <transform name="to_world">
            <lookat origin="0, 1.4841, 5.4950" 
                    target="0, 1.25, 0" 
                    up    ="0, 1, 0"/>
        </transform>

        <film type="hdrfilm">
            <integer name="width" value="640"/>
            <integer name="height" value="480"/>
            <rfilter type="box"/>
        </film>

        <sampler type="independent">
            <integer name="sample_count" value="8192"/>
        </sampler>
    </sensor>
    
    <bsdf type="diffuse" id="mat_gray">
        <rgb name="reflectance" value="0.75, 0.75, 0.75"/>
    </bsdf>

    <bsdf type="diffuse" id="mat_red">
        <rgb name="reflectance" value="0.75, 0.25, 0.25"/>
    </bsdf>

    <bsdf type="diffuse" id="mat_blue">
        <rgb name="reflectance" value="0.25, 0.25, 0.75"/>
    </bsdf>

    <bsdf type="conductor" id="mat_mirror">
        <string name="material" value="none"/>
    </bsdf>

    <bsdf type="dielectric" id="mat_glass">
        <float name="int_ior" value="1.5"/>
        <float name="ext_ior" value="1.0"/>
        <rgb name="specular_transmittance" value="1.0, 1.0, 1.0"/>
    </bsdf>

    <!-- Left Wall: Center (-10001.5, 1.2, 0) -->
    <shape type="sphere">
        <transform name="to_world">
            <scale value="10000"/>
            <translate x="-10001.5" y="1.2" z="0"/>
        </transform>
        <ref id="mat_red"/>
    </shape>

    <!-- Right Wall: Center (10001.5, 1.2, 0) -->
    <shape type="sphere">
        <transform name="to_world">
            <scale value="10000"/>
            <translate x="10001.5" y="1.2" z="0"/>
        </transform>
        <ref id="mat_blue"/>
    </shape>

    <!-- Back Wall: Center (0, 1.2, -10002) -->
    <shape type="sphere">
        <transform name="to_world">
            <scale value="10000"/>
            <translate x="0" y="1.2" z="-10002.0"/>
        </transform>
        <ref id="mat_gray"/>
    </shape>

    <!-- Floor: Center (0, -10000, 0) -->
    <shape type="sphere">
        <transform name="to_world">
            <scale value="10000"/>
            <translate x="0" y="-10000.0" z="0"/>
        </transform>
        <ref id="mat_gray"/>
    </shape>

    <!-- Ceiling: Center (0, 10002.4, 0) -->
    <shape type="sphere">
        <transform name="to_world">
            <scale value="10000"/>
            <translate x="0" y="10002.4" z="0"/>
        </transform>
        <ref id="mat_gray"/>
    </shape>

    <!-- Objects -->
    <shape type="sphere">
        <transform name="to_world">
            <scale value="0.5"/>
            <translate x="-0.7" y="0.5" z="-0.6"/>
        </transform>
        <ref id="mat_mirror"/>
    </shape>

    <shape type="sphere">
        <transform name="to_world">
            <scale value="0.5"/>
            <translate x="0.7" y="0.5" z="0.6"/>
        </transform>
        <ref id="mat_glass"/>
    </shape>

    <!-- Light -->
    <shape type="disk">
        <transform name="to_world">
            <scale value="0.502"/>
            <!-- 
               Position: Just below the ceiling (2.4) to avoid Z-fighting.
               Rotate: -90 degrees around X to face downwards.
            -->
            <rotate x="1" angle="90"/>
            <translate x="0" y="2.399" z="0"/>
        </transform>
        
        <emitter type="area">
            <rgb name="radiance" value="34.2183, 34.2183, 34.2183"/>
        </emitter>
    </shape>

</scene>